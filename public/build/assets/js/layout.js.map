{"version":3,"sources":["layout.js","quick-sidebar.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"layout.js","sourcesContent":["/**\r\nCore script to handle the entire theme and core functions\r\n**/\r\nvar Layout = function () {\r\n\r\n    var layoutImgPath = 'layouts/layout/img/';  \r\n\r\n    var layoutCssPath = 'layouts/layout/css/';\r\n\r\n    var resBreakpointMd = App.getResponsiveBreakpoint('md');\r\n\r\n    var ajaxContentSuccessCallbacks = [];\r\n    var ajaxContentErrorCallbacks = [];\r\n\r\n    //* BEGIN:CORE HANDLERS *//\r\n    // this function handles responsive layout on screen size resize or mobile device rotate.\r\n\r\n    // Set proper height for sidebar and content. The content and sidebar height must be synced always.\r\n    var handleSidebarAndContentHeight = function () {\r\n        var content = $('.page-content');\r\n        var sidebar = $('.page-sidebar');\r\n        var body = $('body');\r\n        var height;\r\n\r\n        if (body.hasClass(\"page-footer-fixed\") === true && body.hasClass(\"page-sidebar-fixed\") === false) {\r\n            var available_height = App.getViewPort().height - $('.page-footer').outerHeight() - $('.page-header').outerHeight();\r\n            var sidebar_height = sidebar.outerHeight();\r\n            if (sidebar_height > available_height) {\r\n                available_height = sidebar_height + $('.page-footer').outerHeight();\r\n            }\r\n            if (content.height() < available_height) {\r\n                content.css('min-height', available_height);\r\n            }\r\n        } else {\r\n            if (body.hasClass('page-sidebar-fixed')) {\r\n                height = _calculateFixedSidebarViewportHeight();\r\n                if (body.hasClass('page-footer-fixed') === false) {\r\n                    height = height - $('.page-footer').outerHeight();\r\n                }\r\n            } else {\r\n                var headerHeight = $('.page-header').outerHeight();\r\n                var footerHeight = $('.page-footer').outerHeight();\r\n\r\n                if (App.getViewPort().width < resBreakpointMd) {\r\n                    height = App.getViewPort().height - headerHeight - footerHeight;\r\n                } else {\r\n                    height = sidebar.height() + 20;\r\n                }\r\n\r\n                if ((height + headerHeight + footerHeight) <= App.getViewPort().height) {\r\n                    height = App.getViewPort().height - headerHeight - footerHeight;\r\n                }\r\n            }\r\n            content.css('min-height', height);\r\n        }\r\n    };\r\n\r\n    // Handle sidebar menu links\r\n    var handleSidebarMenuActiveLink = function (mode, el, $state) {\r\n        var url = location.hash.toLowerCase();\r\n        var menu = $('.page-sidebar-menu');\r\n \r\n        if (mode === 'click' || mode === 'set') {\r\n            el = $(el);\r\n        } else if (mode === 'match') {\r\n            menu.find('li > a').each(function () {\r\n                var state = $(this).attr('ui-sref');\r\n                if ($state && state) {\r\n                    if ($state.is(state)) {\r\n                        el = $(this);\r\n                        return;\r\n                    }\r\n                } else {\r\n                    var path = $(this).attr('href');\r\n                    if (path) {\r\n                        // url match condition         \r\n                        path = path.toLowerCase();\r\n                        if (path.length > 1 && url.substr(1, path.length - 1) == path.substr(1)) {\r\n                            el = $(this);\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n \r\n        if (!el || el.size() == 0) {\r\n            return;\r\n        }\r\n \r\n        if (el.attr('href') == 'javascript:;' ||\r\n            el.attr('ui-sref') == 'javascript:;' ||\r\n            el.attr('href') == '#' ||\r\n            el.attr('ui-sref') == '#'\r\n            ) {\r\n            return;\r\n        }\r\n \r\n        var slideSpeed = parseInt(menu.data('slide-speed'));\r\n        var keepExpand = menu.data('keep-expanded');\r\n \r\n        // begin: handle active state\r\n        if (menu.hasClass('page-sidebar-menu-hover-submenu') === false) {\r\n            menu.find('li.nav-item.open').each(function () {\r\n                var match = false;\r\n                $(this).find('li').each(function () {\r\n                    var state = $(this).attr('ui-sref');\r\n                    if ($state && state) {\r\n                        if ($state.is(state)) {\r\n                            match = true;\r\n                            return;\r\n                        }\r\n                    } else if ($(this).find(' > a').attr('href') === el.attr('href')) {\r\n                        match = true;\r\n                        return;\r\n                    }\r\n                });\r\n \r\n                if (match === true) {\r\n                    return;\r\n                }\r\n \r\n                $(this).removeClass('open');\r\n                $(this).find('> a > .arrow.open').removeClass('open');\r\n                $(this).find('> .sub-menu').slideUp();\r\n            });\r\n        } else {\r\n            menu.find('li.open').removeClass('open');\r\n        }\r\n \r\n        menu.find('li.active').removeClass('active');\r\n        menu.find('li > a > .selected').remove();\r\n        // end: handle active state\r\n \r\n        el.parents('li').each(function () {\r\n            $(this).addClass('active');\r\n            $(this).find('> a > span.arrow').addClass('open');\r\n \r\n            if ($(this).parent('ul.page-sidebar-menu').size() === 1) {\r\n                $(this).find('> a').append('<span class=\"selected\"></span>');\r\n            }\r\n \r\n            if ($(this).children('ul.sub-menu').size() === 1) {\r\n                $(this).addClass('open');\r\n            }\r\n        });\r\n \r\n        if (mode === 'click') {\r\n            if (App.getViewPort().width < resBreakpointMd && $('.page-sidebar').hasClass('in')) { // close the menu on mobile view while laoding a page \r\n                $('.page-header .responsive-toggler').click();\r\n            }\r\n        }\r\n    };\r\n\r\n    // Handle sidebar menu\r\n    var handleSidebarMenu = function () {\r\n        // offcanvas mobile menu \r\n        $('.page-sidebar-mobile-offcanvas .responsive-toggler').click(function(e) {\r\n            $('body').toggleClass('page-sidebar-mobile-offcanvas-open');\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        });\r\n\r\n        if ($('body').hasClass('page-sidebar-mobile-offcanvas')) {\r\n            $(document).on('click', function(e) {\r\n                if ($('body').hasClass('page-sidebar-mobile-offcanvas-open')) {\r\n                    if ($(e.target).closest('.page-sidebar-mobile-offcanvas .responsive-toggler').length === 0 && \r\n                        $(e.target).closest('.page-sidebar-wrapper').length === 0) { \r\n                        $('body').removeClass('page-sidebar-mobile-offcanvas-open');\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                    }\r\n                }                \r\n            });\r\n        }\r\n\r\n        // handle sidebar link click\r\n        $('.page-sidebar-menu').on('click', 'li > a.nav-toggle, li > a > span.nav-toggle', function (e) {\r\n            var that = $(this).closest('.nav-item').children('.nav-link');\r\n\r\n            if (App.getViewPort().width >= resBreakpointMd && !$('.page-sidebar-menu').attr(\"data-initialized\") && $('body').hasClass('page-sidebar-closed') &&  that.parent('li').parent('.page-sidebar-menu').size() === 1) {\r\n                return;\r\n            }\r\n\r\n            var hasSubMenu = that.next().hasClass('sub-menu');\r\n\r\n            if (App.getViewPort().width >= resBreakpointMd && that.parents('.page-sidebar-menu-hover-submenu').size() === 1) { // exit of hover sidebar menu\r\n                return;\r\n            }\r\n\r\n            if (hasSubMenu === false) {\r\n                if (App.getViewPort().width < resBreakpointMd && $('.page-sidebar').hasClass(\"in\")) { // close the menu on mobile view while laoding a page \r\n                    $('.page-header .responsive-toggler').click();\r\n                }\r\n                return;\r\n            }\r\n\r\n            var parent =that.parent().parent();\r\n            var the = that;\r\n            var menu = $('.page-sidebar-menu');\r\n            var sub = that.next();\r\n\r\n            var autoScroll = menu.data(\"auto-scroll\");\r\n            var slideSpeed = parseInt(menu.data(\"slide-speed\"));\r\n            var keepExpand = menu.data(\"keep-expanded\");\r\n            \r\n            if (!keepExpand) {\r\n                parent.children('li.open').children('a').children('.arrow').removeClass('open');\r\n                parent.children('li.open').children('.sub-menu:not(.always-open)').slideUp(slideSpeed);\r\n                parent.children('li.open').removeClass('open');\r\n            }\r\n\r\n            var slideOffeset = -200;\r\n\r\n            if (sub.is(\":visible\")) {\r\n                $('.arrow', the).removeClass(\"open\");\r\n                the.parent().removeClass(\"open\");\r\n                sub.slideUp(slideSpeed, function () {\r\n                    if (autoScroll === true && $('body').hasClass('page-sidebar-closed') === false) {\r\n                        if ($('body').hasClass('page-sidebar-fixed')) {\r\n                            menu.slimScroll({\r\n                                'scrollTo': (the.position()).top\r\n                            });\r\n                        } else {\r\n                            App.scrollTo(the, slideOffeset);\r\n                        }\r\n                    }\r\n                    handleSidebarAndContentHeight();\r\n                });\r\n            } else if (hasSubMenu) {\r\n                $('.arrow', the).addClass(\"open\");\r\n                the.parent().addClass(\"open\");\r\n                sub.slideDown(slideSpeed, function () {\r\n                    if (autoScroll === true && $('body').hasClass('page-sidebar-closed') === false) {\r\n                        if ($('body').hasClass('page-sidebar-fixed')) {\r\n                            menu.slimScroll({\r\n                                'scrollTo': (the.position()).top\r\n                            });\r\n                        } else {\r\n                            App.scrollTo(the, slideOffeset);\r\n                        }\r\n                    }\r\n                    handleSidebarAndContentHeight();\r\n                });\r\n            }\r\n\r\n            e.preventDefault();\r\n        });\r\n\r\n        // handle menu close for angularjs version\r\n        if (App.isAngularJsApp()) {\r\n            $(\".page-sidebar-menu li > a\").on(\"click\", function(e) {\r\n                if (App.getViewPort().width < resBreakpointMd && $(this).next().hasClass('sub-menu') === false) {\r\n                    $('.page-header .responsive-toggler').click();\r\n                }\r\n            });\r\n        }\r\n\r\n        // handle ajax links within sidebar menu\r\n        $('.page-sidebar').on('click', ' li > a.ajaxify', function (e) {\r\n            e.preventDefault();\r\n            App.scrollTop();\r\n            var url = $(this).attr(\"href\");\r\n            var menuContainer = $('.page-sidebar ul');\r\n\r\n            menuContainer.children('li.active').removeClass('active');\r\n            menuContainer.children('arrow.open').removeClass('open');\r\n\r\n            $(this).parents('li').each(function () {\r\n                $(this).addClass('active');\r\n                $(this).children('a > span.arrow').addClass('open');\r\n            });\r\n            $(this).parents('li').addClass('active');\r\n\r\n            if (App.getViewPort().width < resBreakpointMd && $('.page-sidebar').hasClass(\"in\")) { // close the menu on mobile view while laoding a page \r\n                $('.page-header .responsive-toggler').click();\r\n            }\r\n\r\n            Layout.loadAjaxContent(url, $(this));\r\n        });\r\n\r\n        // handle ajax link within main content\r\n        $('.page-content').on('click', '.ajaxify', function (e) {\r\n            e.preventDefault();\r\n            App.scrollTop();\r\n\r\n            var url = $(this).attr(\"href\");\r\n\r\n            if (App.getViewPort().width < resBreakpointMd && $('.page-sidebar').hasClass(\"in\")) { // close the menu on mobile view while laoding a page \r\n                $('.page-header .responsive-toggler').click();\r\n            }\r\n\r\n            Layout.loadAjaxContent(url);\r\n        });\r\n\r\n        // handle scrolling to top on responsive menu toggler click when header is fixed for mobile view\r\n        $(document).on('click', '.page-header-fixed-mobile .page-header .responsive-toggler', function(){\r\n            App.scrollTop(); \r\n        });      \r\n     \r\n        // handle sidebar hover effect        \r\n        handleFixedSidebarHoverEffect();\r\n\r\n        // handle the search bar close\r\n        $('.page-sidebar').on('click', '.sidebar-search .remove', function (e) {\r\n            e.preventDefault();\r\n            $('.sidebar-search').removeClass(\"open\");\r\n        });\r\n\r\n        // handle the search query submit on enter press\r\n        $('.page-sidebar .sidebar-search').on('keypress', 'input.form-control', function (e) {\r\n            if (e.which == 13) {\r\n                $('.sidebar-search').submit();\r\n                return false; //<---- Add this line\r\n            }\r\n        });\r\n\r\n        // handle the search submit(for sidebar search and responsive mode of the header search)\r\n        $('.sidebar-search .submit').on('click', function (e) {\r\n            e.preventDefault();\r\n            if ($('body').hasClass(\"page-sidebar-closed\")) {\r\n                if ($('.sidebar-search').hasClass('open') === false) {\r\n                    if ($('.page-sidebar-fixed').size() === 1) {\r\n                        $('.page-sidebar .sidebar-toggler').click(); //trigger sidebar toggle button\r\n                    }\r\n                    $('.sidebar-search').addClass(\"open\");\r\n                } else {\r\n                    $('.sidebar-search').submit();\r\n                }\r\n            } else {\r\n                $('.sidebar-search').submit();\r\n            }\r\n        });\r\n\r\n        // handle close on body click\r\n        if ($('.sidebar-search').size() !== 0) {\r\n            $('.sidebar-search .input-group').on('click', function(e){\r\n                e.stopPropagation();\r\n            });\r\n\r\n            $('body').on('click', function() {\r\n                if ($('.sidebar-search').hasClass('open')) {\r\n                    $('.sidebar-search').removeClass(\"open\");\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    // Helper function to calculate sidebar height for fixed sidebar layout.\r\n    var _calculateFixedSidebarViewportHeight = function () {\r\n        var sidebarHeight = App.getViewPort().height - $('.page-header').outerHeight(true);\r\n        if ($('body').hasClass(\"page-footer-fixed\")) {\r\n            sidebarHeight = sidebarHeight - $('.page-footer').outerHeight();\r\n        }\r\n\r\n        return sidebarHeight;\r\n    };\r\n\r\n    // Handles fixed sidebar\r\n    var handleFixedSidebar = function () {\r\n        var menu = $('.page-sidebar-menu');\r\n\r\n        handleSidebarAndContentHeight();\r\n\r\n        if ($('.page-sidebar-fixed').size() === 0) {\r\n            App.destroySlimScroll(menu);\r\n            return;\r\n        }\r\n\r\n        if (App.getViewPort().width >= resBreakpointMd && !$('body').hasClass('page-sidebar-menu-not-fixed')) {\r\n            menu.attr(\"data-height\", _calculateFixedSidebarViewportHeight());\r\n            App.destroySlimScroll(menu);\r\n            App.initSlimScroll(menu);\r\n            handleSidebarAndContentHeight();\r\n        } \r\n    };\r\n\r\n    // Handles sidebar toggler to close/hide the sidebar.\r\n    var handleFixedSidebarHoverEffect = function () {\r\n        if ($('body').hasClass('page-sidebar-fixed')) {\r\n            $('.page-sidebar').on('mouseenter', function () {\r\n                if ($('body').hasClass('page-sidebar-closed')) {\r\n                    $(this).find('.page-sidebar-menu').removeClass('page-sidebar-menu-closed');\r\n                }\r\n            }).on('mouseleave', function () {\r\n                if ($('body').hasClass('page-sidebar-closed')) {\r\n                    $(this).find('.page-sidebar-menu').addClass('page-sidebar-menu-closed');\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    // Hanles sidebar toggler\r\n    var handleSidebarToggler = function () {       \r\n        /**\r\n        if (Cookies && Cookies.get('sidebar_closed') === '1' && App.getViewPort().width >= resBreakpointMd) {\r\n            $('body').addClass('page-sidebar-closed');\r\n            $('.page-sidebar-menu').addClass('page-sidebar-menu-closed');\r\n        }\r\n        */\r\n\r\n        // handle sidebar show/hide\r\n        $('body').on('click', '.sidebar-toggler', function (e) {\r\n            var body = $('body');\r\n            var sidebar = $('.page-sidebar');\r\n            var sidebarMenu = $('.page-sidebar-menu');\r\n            $(\".sidebar-search\", sidebar).removeClass(\"open\");\r\n\r\n            if (body.hasClass(\"page-sidebar-closed\")) {\r\n                body.removeClass(\"page-sidebar-closed\");\r\n                sidebarMenu.removeClass(\"page-sidebar-menu-closed\");\r\n                if (Cookies) {\r\n                    Cookies.set('sidebar_closed', '0');\r\n                }\r\n            } else {\r\n                body.addClass(\"page-sidebar-closed\");\r\n                sidebarMenu.addClass(\"page-sidebar-menu-closed\");\r\n                if (body.hasClass(\"page-sidebar-fixed\")) {\r\n                    sidebarMenu.trigger(\"mouseleave\");\r\n                }\r\n                if (Cookies) {\r\n                    Cookies.set('sidebar_closed', '1');\r\n                }\r\n            }\r\n\r\n            $(window).trigger('resize');\r\n        });\r\n    };\r\n\r\n    // Handles the horizontal menu\r\n    var handleHorizontalMenu = function () {\r\n        //handle tab click\r\n        $('.page-header').on('click', '.hor-menu a[data-toggle=\"tab\"]', function (e) {\r\n            e.preventDefault();\r\n            var nav = $(\".hor-menu .nav\");\r\n            var active_link = nav.find('li.current');\r\n            $('li.active', active_link).removeClass(\"active\");\r\n            $('.selected', active_link).remove();\r\n            var new_link = $(this).parents('li').last();\r\n            new_link.addClass(\"current\");\r\n            new_link.find(\"a:first\").append('<span class=\"selected\"></span>');\r\n        });\r\n\r\n        // handle search box expand/collapse        \r\n        $('.page-header').on('click', '.search-form', function (e) {\r\n            $(this).addClass(\"open\");\r\n            $(this).find('.form-control').focus();\r\n\r\n            $('.page-header .search-form .form-control').on('blur', function (e) {\r\n                $(this).closest('.search-form').removeClass(\"open\");\r\n                $(this).unbind(\"blur\");\r\n            });\r\n        });\r\n\r\n        // handle hor menu search form on enter press\r\n        $('.page-header').on('keypress', '.hor-menu .search-form .form-control', function (e) {\r\n            if (e.which == 13) {\r\n                $(this).closest('.search-form').submit();\r\n                return false;\r\n            }\r\n        });\r\n\r\n        // handle header search button click\r\n        $('.page-header').on('mousedown', '.search-form.open .submit', function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            $(this).closest('.search-form').submit();\r\n        });\r\n\r\n        \r\n        $(document).on('click', '.mega-menu-dropdown .dropdown-menu', function (e) {\r\n            e.stopPropagation();\r\n        });\r\n    };\r\n\r\n    // Handles Bootstrap Tabs.\r\n    var handleTabs = function () {\r\n        // fix content height on tab click\r\n        $('body').on('shown.bs.tab', 'a[data-toggle=\"tab\"]', function () {\r\n            handleSidebarAndContentHeight();\r\n        });\r\n    };\r\n\r\n    // Handles the go to top button at the footer\r\n    var handleGoTop = function () {\r\n        var offset = 300;\r\n        var duration = 500;\r\n\r\n        if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {  // ios supported\r\n            $(window).bind(\"touchend touchcancel touchleave\", function(e){\r\n               if ($(this).scrollTop() > offset) {\r\n                    $('.scroll-to-top').fadeIn(duration);\r\n                } else {\r\n                    $('.scroll-to-top').fadeOut(duration);\r\n                }\r\n            });\r\n        } else {  // general \r\n            $(window).scroll(function() {\r\n                if ($(this).scrollTop() > offset) {\r\n                    $('.scroll-to-top').fadeIn(duration);\r\n                } else {\r\n                    $('.scroll-to-top').fadeOut(duration);\r\n                }\r\n            });\r\n        }\r\n        \r\n        $('.scroll-to-top').click(function(e) {\r\n            e.preventDefault();\r\n            $('html, body').animate({scrollTop: 0}, duration);\r\n            return false;\r\n        });\r\n    };\r\n\r\n    // Hanlde 100% height elements(block, portlet, etc)\r\n    var handle100HeightContent = function () {\r\n\r\n        $('.full-height-content').each(function(){\r\n            var target = $(this);\r\n            var height;\r\n\r\n            height = App.getViewPort().height -\r\n                $('.page-header').outerHeight(true) -\r\n                $('.page-footer').outerHeight(true) -\r\n                $('.page-title').outerHeight(true) -\r\n                $('.page-bar').outerHeight(true);\r\n\r\n            if (target.hasClass('portlet')) {\r\n                var portletBody = target.find('.portlet-body');\r\n\r\n                App.destroySlimScroll(portletBody.find('.full-height-content-body')); // destroy slimscroll \r\n                \r\n                height = height -\r\n                    target.find('.portlet-title').outerHeight(true) -\r\n                    parseInt(target.find('.portlet-body').css('padding-top')) -\r\n                    parseInt(target.find('.portlet-body').css('padding-bottom')) - 5;\r\n\r\n                if (App.getViewPort().width >= resBreakpointMd && target.hasClass(\"full-height-content-scrollable\")) {\r\n                    height = height - 35;\r\n                    portletBody.find('.full-height-content-body').css('height', height);\r\n                    App.initSlimScroll(portletBody.find('.full-height-content-body'));\r\n                } else {\r\n                    portletBody.css('min-height', height);\r\n                }\r\n            } else {\r\n               App.destroySlimScroll(target.find('.full-height-content-body')); // destroy slimscroll \r\n\r\n                if (App.getViewPort().width >= resBreakpointMd && target.hasClass(\"full-height-content-scrollable\")) {\r\n                    height = height - 35;\r\n                    target.find('.full-height-content-body').css('height', height);\r\n                    App.initSlimScroll(target.find('.full-height-content-body'));\r\n                } else {\r\n                    target.css('min-height', height);\r\n                }\r\n            }\r\n        });        \r\n    };\r\n    //* END:CORE HANDLERS *//\r\n\r\n    return {\r\n        // Main init methods to initialize the layout\r\n        //IMPORTANT!!!: Do not modify the core handlers call order.\r\n\r\n        initHeader: function() {\r\n            handleHorizontalMenu(); // handles horizontal menu    \r\n        },\r\n\r\n        setSidebarMenuActiveLink: function(mode, el) {\r\n            handleSidebarMenuActiveLink(mode, el, null);\r\n        },\r\n\r\n        setAngularJsSidebarMenuActiveLink: function(mode, el, $state) {\r\n            handleSidebarMenuActiveLink(mode, el, $state);\r\n        },\r\n\r\n        initSidebar: function($state) {\r\n            //layout handlers\r\n            handleFixedSidebar(); // handles fixed sidebar menu\r\n            handleSidebarMenu(); // handles main menu\r\n            handleSidebarToggler(); // handles sidebar hide/show\r\n\r\n            if (App.isAngularJsApp()) {      \r\n                handleSidebarMenuActiveLink('match', null, $state); // init sidebar active links \r\n            }\r\n\r\n            App.addResizeHandler(handleFixedSidebar); // reinitialize fixed sidebar on window resize\r\n        },\r\n\r\n        initContent: function() {\r\n            handle100HeightContent(); // handles 100% height elements(block, portlet, etc)\r\n            handleTabs(); // handle bootstrah tabs\r\n\r\n            App.addResizeHandler(handleSidebarAndContentHeight); // recalculate sidebar & content height on window resize\r\n            App.addResizeHandler(handle100HeightContent); // reinitialize content height on window resize \r\n        },\r\n\r\n        initFooter: function() {\r\n            handleGoTop(); //handles scroll to top functionality in the footer\r\n        },\r\n\r\n        init: function () {            \r\n            this.initHeader();\r\n            this.initSidebar(null);\r\n            this.initContent();\r\n            this.initFooter();\r\n        },\r\n\r\n        loadAjaxContent: function(url, sidebarMenuLink) {\r\n            var pageContent = $('.page-content .page-content-body');    \r\n\r\n            App.startPageLoading({animate: true});\r\n            \r\n            $.ajax({\r\n                type: \"GET\",\r\n                cache: false,\r\n                url: url,\r\n                dataType: \"html\",\r\n                success: function (res) {    \r\n                    App.stopPageLoading();\r\n                                    \r\n                    for (var i = 0; i < ajaxContentSuccessCallbacks.length; i++) {\r\n                        ajaxContentSuccessCallbacks[i].call(res);\r\n                    }\r\n\r\n                    if (sidebarMenuLink.size() > 0 && sidebarMenuLink.parents('li.open').size() === 0) {\r\n                        $('.page-sidebar-menu > li.open > a').click();\r\n                    }\r\n\r\n                    pageContent.html(res);\r\n                    Layout.fixContentHeight(); // fix content height\r\n                    App.initAjax(); // initialize core stuff\r\n                },\r\n                error: function (res, ajaxOptions, thrownError) {\r\n                    App.stopPageLoading();\r\n                    pageContent.html('<h4>Could not load the requested content.</h4>');\r\n\r\n                    for (var i = 0; i < ajaxContentErrorCallbacks.length; i++) {\r\n                        ajaxContentSuccessCallbacks[i].call(res);\r\n                    }                    \r\n                }\r\n            });\r\n        },\r\n\r\n        addAjaxContentSuccessCallback: function(callback) {\r\n            ajaxContentSuccessCallbacks.push(callback);\r\n        },\r\n\r\n        addAjaxContentErrorCallback: function(callback) {\r\n            ajaxContentErrorCallbacks.push(callback);\r\n        },\r\n\r\n        //public function to fix the sidebar and content height accordingly\r\n        fixContentHeight: function () {\r\n            handleSidebarAndContentHeight();\r\n        },\r\n\r\n        initFixedSidebarHoverEffect: function() {\r\n            handleFixedSidebarHoverEffect();\r\n        },\r\n\r\n        initFixedSidebar: function() {\r\n            handleFixedSidebar();\r\n        },\r\n\r\n        getLayoutImgPath: function () {\r\n            return App.getAssetsPath() + layoutImgPath;\r\n        },\r\n\r\n        getLayoutCssPath: function () {\r\n            return App.getAssetsPath() + layoutCssPath;\r\n        }\r\n    };\r\n\r\n}();\r\n\r\nif (App.isAngularJsApp() === false) {\r\n    jQuery(document).ready(function() {    \r\n       Layout.init(); // init metronic core componets\r\n    });\r\n}","/**\r\nCore script to handle the entire theme and core functions\r\n**/\r\nvar QuickSidebar = function () {\r\n\r\n    // Handles quick sidebar toggler\r\n    var handleQuickSidebarToggler = function () {\r\n        // quick sidebar toggler\r\n        $('.dropdown-quick-sidebar-toggler a, .page-quick-sidebar-toggler, .quick-sidebar-toggler').click(function (e) {\r\n            $('body').toggleClass('page-quick-sidebar-open'); \r\n        });\r\n    };\r\n\r\n    // Handles quick sidebar chats\r\n    var handleQuickSidebarChat = function () {\r\n        var wrapper = $('.page-quick-sidebar-wrapper');\r\n        var wrapperChat = wrapper.find('.page-quick-sidebar-chat');\r\n\r\n        var initChatSlimScroll = function () {\r\n            var chatUsers = wrapper.find('.page-quick-sidebar-chat-users');\r\n            var chatUsersHeight;\r\n\r\n            chatUsersHeight = wrapper.height() - wrapper.find('.nav-tabs').outerHeight(true);\r\n\r\n            // chat user list \r\n            App.destroySlimScroll(chatUsers);\r\n            chatUsers.attr(\"data-height\", chatUsersHeight);\r\n            App.initSlimScroll(chatUsers);\r\n\r\n            var chatMessages = wrapperChat.find('.page-quick-sidebar-chat-user-messages');\r\n            var chatMessagesHeight = chatUsersHeight - wrapperChat.find('.page-quick-sidebar-chat-user-form').outerHeight(true);\r\n            chatMessagesHeight = chatMessagesHeight - wrapperChat.find('.page-quick-sidebar-nav').outerHeight(true);\r\n\r\n            // user chat messages \r\n            App.destroySlimScroll(chatMessages);\r\n            chatMessages.attr(\"data-height\", chatMessagesHeight);\r\n            App.initSlimScroll(chatMessages);\r\n        };\r\n\r\n        initChatSlimScroll();\r\n        App.addResizeHandler(initChatSlimScroll); // reinitialize on window resize\r\n\r\n        wrapper.find('.page-quick-sidebar-chat-users .media-list > .media').click(function () {\r\n            wrapperChat.addClass(\"page-quick-sidebar-content-item-shown\");\r\n        });\r\n\r\n        wrapper.find('.page-quick-sidebar-chat-user .page-quick-sidebar-back-to-list').click(function () {\r\n            wrapperChat.removeClass(\"page-quick-sidebar-content-item-shown\");\r\n        });\r\n\r\n        var handleChatMessagePost = function (e) {\r\n            e.preventDefault();\r\n\r\n            var chatContainer = wrapperChat.find(\".page-quick-sidebar-chat-user-messages\");\r\n            var input = wrapperChat.find('.page-quick-sidebar-chat-user-form .form-control');\r\n\r\n            var text = input.val();\r\n            if (text.length === 0) {\r\n                return;\r\n            }\r\n\r\n            var preparePost = function(dir, time, name, avatar, message) {\r\n                var tpl = '';\r\n                tpl += '<div class=\"post '+ dir +'\">';\r\n                tpl += '<img class=\"avatar\" alt=\"\" src=\"' + Layout.getLayoutImgPath() + avatar +'.jpg\"/>';\r\n                tpl += '<div class=\"message\">';\r\n                tpl += '<span class=\"arrow\"></span>';\r\n                tpl += '<a href=\"#\" class=\"name\">Bob Nilson</a>&nbsp;';\r\n                tpl += '<span class=\"datetime\">' + time + '</span>';\r\n                tpl += '<span class=\"body\">';\r\n                tpl += message;\r\n                tpl += '</span>';\r\n                tpl += '</div>';\r\n                tpl += '</div>';\r\n\r\n                return tpl;\r\n            };\r\n\r\n            // handle post\r\n            var time = new Date();\r\n            var message = preparePost('out', (time.getHours() + ':' + time.getMinutes()), \"Bob Nilson\", 'avatar3', text);\r\n            message = $(message);\r\n            chatContainer.append(message);\r\n\r\n            chatContainer.slimScroll({\r\n                scrollTo: '1000000px'\r\n            });\r\n\r\n            input.val(\"\");\r\n\r\n            // simulate reply\r\n            setTimeout(function(){\r\n                var time = new Date();\r\n                var message = preparePost('in', (time.getHours() + ':' + time.getMinutes()), \"Ella Wong\", 'avatar2', 'Lorem ipsum doloriam nibh...');\r\n                message = $(message);\r\n                chatContainer.append(message);\r\n\r\n                chatContainer.slimScroll({\r\n                    scrollTo: '1000000px'\r\n                });\r\n            }, 3000);\r\n        };\r\n\r\n        wrapperChat.find('.page-quick-sidebar-chat-user-form .btn').click(handleChatMessagePost);\r\n        wrapperChat.find('.page-quick-sidebar-chat-user-form .form-control').keypress(function (e) {\r\n            if (e.which == 13) {\r\n                handleChatMessagePost(e);\r\n                return false;\r\n            }\r\n        });\r\n    };\r\n\r\n    // Handles quick sidebar tasks\r\n    var handleQuickSidebarAlerts = function () {\r\n        var wrapper = $('.page-quick-sidebar-wrapper');\r\n\r\n        var initAlertsSlimScroll = function () {\r\n            var alertList = wrapper.find('.page-quick-sidebar-alerts-list');\r\n            var alertListHeight;\r\n\r\n            alertListHeight = wrapper.height() - 80 - wrapper.find('.nav-justified > .nav-tabs').outerHeight();\r\n\r\n            // alerts list \r\n            App.destroySlimScroll(alertList);\r\n            alertList.attr(\"data-height\", alertListHeight);\r\n            App.initSlimScroll(alertList);\r\n        };\r\n\r\n        initAlertsSlimScroll();\r\n        App.addResizeHandler(initAlertsSlimScroll); // reinitialize on window resize\r\n    };\r\n\r\n    // Handles quick sidebar settings\r\n    var handleQuickSidebarSettings = function () {\r\n        var wrapper = $('.page-quick-sidebar-wrapper');\r\n\r\n        var initSettingsSlimScroll = function () {\r\n            var settingsList = wrapper.find('.page-quick-sidebar-settings-list');\r\n            var settingsListHeight;\r\n\r\n            settingsListHeight = wrapper.height() - 80 - wrapper.find('.nav-justified > .nav-tabs').outerHeight();\r\n           \r\n            // alerts list \r\n            App.destroySlimScroll(settingsList);\r\n            settingsList.attr(\"data-height\", settingsListHeight);\r\n            App.initSlimScroll(settingsList);\r\n        };\r\n\r\n        initSettingsSlimScroll();\r\n        App.addResizeHandler(initSettingsSlimScroll); // reinitialize on window resize\r\n    };\r\n\r\n    return {\r\n\r\n        init: function () {\r\n            //layout handlers\r\n            handleQuickSidebarToggler(); // handles quick sidebar's toggler\r\n            handleQuickSidebarChat(); // handles quick sidebar's chats\r\n            handleQuickSidebarAlerts(); // handles quick sidebar's alerts\r\n            handleQuickSidebarSettings(); // handles quick sidebar's setting\r\n        }\r\n    };\r\n\r\n}();\r\n\r\nif (App.isAngularJsApp() === false) { \r\n    jQuery(document).ready(function() {    \r\n       QuickSidebar.init(); // init metronic core componets\r\n    });\r\n}"],"sourceRoot":"/source/"}